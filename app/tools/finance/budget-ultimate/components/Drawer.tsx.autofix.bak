"use client";

import { X } from "lucide-react";
import { useState, useEffect } from "react";

export default function Drawer({ open, onClose, defaultData }: any) {
  const [form, setForm] = useState({
    name: "",
    amount: "",
    color: "#000000",
    type: "Expense",
  });

  useEffect(() => {
    if (defaultData) setForm(defaultData);
  }, [defaultData]);

  if (!open) return null;

  return (
    <>
      {/* BACKDROP */}
      <div className="fixed inset-0 bg-black/20 z-40" onClick={onClose} />

      {/* PANEL */}
      <div className="fixed right-0 top-0 h-full w-full sm:w-96 bg-white shadow-xl z-50 p-6 flex flex-col">
        {/* HEADER */}
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-semibold">
            {defaultData ? "Edit Category" : "Add Category"}
          </h2>
          <button onClick={onClose} className="p-1">
            <X size={22} />
          </button>
        </div>

        {/* FORM */}
        <div className="space-y-4 flex-1 overflow-y-auto">

          {/* NAME */}
          <div>
            <label className="text-sm text-slate-500">Name</label>
            <input
              className="w-full mt-1 border px-3 py-2 rounded-lg"
              value={form.name}
              onChange={(e) => setForm({ ...form, name: e.target.value })}
            />
          </div>

          {/* TYPE */}
          <div>
            <label className="text-sm text-slate-500">Type</label>
            <select
              className="w-full mt-1 border px-3 py-2 rounded-lg"
              value={form.type}
              onChange={(e) => setForm({ ...form, type: e.target.value })}
            >
              <option>Expense</option>
              <option>Income</option>
            </select>
          </div>

          {/* AMOUNT */}
          <div>
            <label className="text-sm text-slate-500">Amount (optional)</label>
            <input
              type="number"
              className="w-full mt-1 border px-3 py-2 rounded-lg"
              value={form.amount}
              onChange={(e) =>
                setForm({ ...form, amount: Number(e.target.value) })
              }
            />
          </div>

          {/* COLOR */}
          <div>
            <label className="text-sm text-slate-500">Color</label>
            <input
              type="color"
              className="w-16 h-10 mt-1 border rounded"
              value={form.color}
              onChange={(e) => setForm({ ...form, color: e.target.value })}
            />
          </div>
        </div>

        {/* FOOTER */}
        <button className="w-full py-3 bg-black text-white rounded-lg mt-4">
          Save
        </button>
      </div>
    </>
  );
}
